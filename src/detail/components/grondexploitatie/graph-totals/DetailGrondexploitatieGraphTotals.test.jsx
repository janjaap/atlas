import React from 'react';
import { shallow } from 'enzyme';

import DetailGrondexploitatieGraphTotals, { CustomBar, CustomLabel, CustomYTick } from './DetailGrondexploitatieGraphTotals';
import { getKostenCategoryColor } from '../../../services/grondexploitatie/categories';

jest.mock('../../../services/grondexploitatie/categories');

describe('DetailGrondexploitatieGraphTotals', () => {
  const colors = {
    socialeHuur: '#111',
    kantoorruimte: '#999',
    bedrijfsruimte: '#FA0'
  };
  getKostenCategoryColor.mockImplementation((key) => colors[key]);
  let data;

  beforeEach(() => {
    data = {
      baten: [
        {
          id: 'socialeHuur',
          name: 'Sociale Huur',
          begroot: {
            value: 1,
            label: '1'
          },
          geboekt: {
            value: 1,
            label: '1'
          }
        },
        {
          id: 'kantoorruimte',
          name: 'Kantoorruimte',
          begroot: {
            value: 0,
            label: '0'
          },
          geboekt: {
            value: 0,
            label: '0'
          }
        },
        {
          id: 'bedrijfsruimte',
          name: 'Bedrijfsruimte',
          begroot: {
            value: 0.5,
            label: '0,5'
          },
          geboekt: {
            value: 0,
            label: '0'
          }
        }
      ],
      kosten: [
        {
          id: 'verwervingen',
          name: 'Verwervingen',
          begroot: {
            value: 1,
            label: '1'
          },
          geboekt: {
            value: 1,
            label: '1'
          }
        },
        {
          id: 'bodemsanering',
          name: 'Bodemsanering',
          begroot: {
            value: 0,
            label: '0'
          },
          geboekt: {
            value: 0,
            label: '0'
          }
        },
        {
          id: 'bouwrijpMaken',
          name: 'Bouwrijp maken',
          begroot: {
            value: 0.5,
            label: '0,5'
          },
          geboekt: {
            value: 0,
            label: '0'
          }
        }
      ]
    };
  });

  it('should render everything', () => {
    const wrapper = shallow(
      <DetailGrondexploitatieGraphTotals
        data={data}
      />
    );
    expect(wrapper).toMatchSnapshot();
  });

  it('should handle secondary title', () => {
    const wrapper = shallow(
      <DetailGrondexploitatieGraphTotals
        data={data}
        hasSecondaryTitle
      />
    );
    expect(wrapper).toMatchSnapshot();
  });
});

describe('CustomBar', () => {
  it('should render everything', () => {
    const wrapper = shallow(
      <CustomBar />
    );
    expect(wrapper).toMatchSnapshot();
  });
});

describe('CustomLabel', () => {
  it('should render everything', () => {
    const wrapper = shallow(
      <CustomLabel />
    );
    expect(wrapper).toMatchSnapshot();
  });
});

describe('CustomYTick', () => {
  it('should render everything', () => {
    const wrapper = shallow(
      <CustomYTick />
    );
    expect(wrapper).toMatchSnapshot();
  });
});
