import fetchByUri from './grondexploitatie';

const mockResponse = {
  begroting: 'Werkbegroting',
  plannaam: 'Uitvoeringsbesluit',
  startdatum: '2010-01-01',
  prijspeildatum: '2017-01-02'
};

describe('Grondexploitatie Grafiek Totale Begroting Service', () => {
  beforeEach(() => {
    global.sessionStorage = {
      getItem: ((item) => item)
    };
    global.fetch = jest.fn().mockImplementation(() => (
     new Promise((resolve) => {
       resolve({
         ok: true,
         json: () => mockResponse
       });
     })));
  });

  it('should return the correct response', async () => {
    const response = await fetchByUri('/grondexploitatie');
    expect(response).toEqual({
      ...mockResponse,
      startdatum: new Date(mockResponse.startdatum),
      prijspeildatum: new Date(mockResponse.prijspeildatum)
    });
  });
});
